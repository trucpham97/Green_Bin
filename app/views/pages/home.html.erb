<div class="homepage-container">
  <div class="option-card">
    <div class= "searchbar-container">
      <%= form_with url: recycling_spot_infos_path, method: :get do %>
        <%= text_field_tag :query,
              params[:query],
              placeholder: "Objet, emballage...",
              class: "search-bar"
          %>
        <%= button_tag(type: 'submit', class: "looking-btn") do %>
          <i class='fa-solid fa-magnifying-glass loupe'></i>
        <% end %>
      <% end %>
    </div>

    <% if user_signed_in? %>
      <%= link_to new_product_path, class: "pushable booking-btn-link" do %>
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">
            <div class="focus">
              <div class="focus--mask">
                <div class="focus--mask-inner">SCAN</div>
              </div>
            </div>
          </span>
        <!-- </button> -->

      <% end %>
    <% else %>

      <%= link_to new_user_session_path, class: "booking-btn-link"  do %>
        <div class="booking-btn">
          <p>Log in to scan!</p>
        </div>
      <% end %>
    <% end %>

  </div>

  <div class="option-card">
    <h3 class="margin-p2">Grâce à <span class="highlight">vous</span> :</h3>
    <% total_carbon = 0 %>
    <% Product.all.each do |product| %>
      <% total_carbon += product.carbon.to_f %>
    <% end %>
    <div class="co2-display1">
      <%= image_tag 'co2_cloud2.png', width: "50px", height: "50px", class: 'co2-image' %>
      <span class="highlight"><%= (total_carbon/1000).round(2) %> kg de CO²&nbsp; </span> en moins
    </div>
    <div class="co2-display2">
      <%= image_tag 'co2_car.svg', class: 'co2-image' %>
      Equivalent à&nbsp; <span class="highlight"> <%= (((36000 + total_carbon) * 5)/1000).round(1) %> km&nbsp; </span> en voiture
    </div>
  </div>

  <div class="guide-tri-container">
    <div class="spot-btn-container btn-info-homepage">
      <%= link_to recycling_spot_infos_path, class: "pushable-spot booking-btn-link-spot" do %>
        <span class="shadow-spot shadow-spot2"></span>
        <span class="edge-spot edge-spot2"></span>
        <span class="front-spot front-spot2">Guide du tri<i class="fa-solid fa-book"></i></span>
        <i class="fa-solid fa-book"></i>
      <% end %>
    </div>
  </div>

</div>
